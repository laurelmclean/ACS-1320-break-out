(()=>{"use strict";const t=class{constructor(t=0,s=0,i=100,h=100,e="#f00"){this.x=t,this.y=s,this.width=i,this.height=h,this.color=e}moveTo(t,s){this.x=t,this.y=s}moveBy(t,s){this.x+=t,this.y+=s}render(t){t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle=this.color,t.fill(),t.closePath()}},s=class extends t{constructor(t,s=0,i=0,h=10){super(s,i,0,0,t),this.color=t,this.radius=h,this.dx=2,this.dy=-2}moveTo(){this.x+=this.dx,this.y+=this.dy}randColor(){this.color=`#${(Math.floor(16777216*Math.random())+16777216).toString(16).substring(1)}`}render(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle=this.color,t.fill(),t.closePath()}},i=class extends t{constructor(t=0,s=0,i=75,h=10,e="#51a094"){super(t,s,i,h,e)}moveTo(t){this.x+=t}moveBy(t){this.x=t}},h=class{constructor(t,s,i,h,e){this.x=t,this.y=s,this.color=i,this.value=h,this.font="16px Arial",this.displayText=e}render(t){t.font=this.font,t.fillStyle=this.color,t.fillText(`${this.displayText}${this.value}`,this.x,this.y)}},e=class extends t{constructor(t,s,i,h,e="#a8d3cc"){super(t,s,i,h,e)}},l=class extends t{constructor(t,s,i,h=75,e=20){super(t,s,h,e,i),this.status=!0}},a=document.getElementById("myCanvas"),r=a.getContext("2d");new class{constructor(t,a){this.canvas=t,this.ctx=a,this.color="#51a094",this.x=this.canvas.width/2,this.y=this.canvas.height-30,this.paddleWidth=75,this.paddleX=(this.canvas.width-this.paddleWidth)/2,this.allBricks=new class{constructor(t=3,s=5){this.rows=t,this.cols=s,this.bricks=[],this.brickWidth=75,this.brickHeight=20,this.brickPadding=10,this.brickOffset=30,this.setup()}setup(){for(let t=0;t<this.cols;t+=1){this.bricks[t]=[];for(let s=0;s<this.rows;s+=1)this.bricks[t][s]={x:0,y:0,status:1}}}render(t){for(let s=0;s<this.cols;s+=1)for(let i=0;i<this.rows;i+=1)if(1===this.bricks[s][i].status){const h=s*(this.brickWidth+this.brickPadding)+this.brickOffset,e=i*(this.brickHeight+this.brickPadding)+this.brickOffset;this.bricks[s][i].x=h,this.bricks[s][i].y=e;let a="#133337";1===i?a="#0e2f44":2===i&&(a="#2a6f64"),new l(h,e,a).render(t)}}},this.background=new e(0,0,this.canvas.width,this.canvas.height),this.ball=new s(this.color,this.x,this.y),this.paddle=new i(this.paddleX,this.canvas.height-10),this.scoreText=new h(8,20,this.color,0,"Score: "),this.livesText=new h(this.canvas.width-65,20,this.color,3,"Lives: "),this.rightPressed=!1,this.leftPressed=!1,this.setUp(),this.draw()}setUp(){this.resetBallAndPaddle();const{addEventListener:t}=document;t("keydown",this.keyDownHandler.bind(this),!1),t("keyup",this.keyUpHandler.bind(this),!1),t("mousemove",this.mouseMoveHandler.bind(this),!1)}resetBallAndPaddle(){this.ball.x=Math.floor(Math.random()*this.canvas.width)+0,this.ball.y=this.canvas.height-30,this.ball.dx=3,this.ball.dy=-3,this.paddle.x=(this.canvas.width-this.paddle.width)/2}collisionDetection(){for(let t=0;t<this.allBricks.cols;t+=1)for(let s=0;s<this.allBricks.rows;s+=1){const i=this.allBricks.bricks[t][s];1===i.status&&this.ball.x>i.x&&this.ball.x<i.x+this.allBricks.brickWidth&&this.ball.y>i.y&&this.ball.y<i.y+this.allBricks.brickHeight&&(this.ball.dy=-this.ball.dy,i.status=0,this.ball.randColor(),this.scoreText.value+=1,this.scoreText.value===this.allBricks.rows*this.allBricks.cols&&(alert("YOU WIN! CONGRATULATIONS!"),document.location.reload()))}}movePaddle(){this.rightPressed&&this.paddle.x<this.canvas.width-this.paddle.width?this.paddle.moveTo(7):this.leftPressed&&this.paddle.x>0&&this.paddle.moveTo(-7)}keyDownHandler({key:t}){"Right"===t||"ArrowRight"===t?this.rightPressed=!0:"Left"!==t&&"ArrowLeft"!==t||(this.leftPressed=!0)}keyUpHandler({key:t}){"Right"===t||"ArrowRight"===t?this.rightPressed=!1:"Left"!==t&&"ArrowLeft"!==t||(this.leftPressed=!1)}mouseMoveHandler({clientX:t}){const s=t-this.canvas.offsetLeft;s>0&&s<this.canvas.width&&this.paddle.moveBy(s-this.paddle.width/2)}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.background.render(this.ctx),this.allBricks.render(this.ctx),this.ball.render(this.ctx),this.ball.moveTo(),this.paddle.render(this.ctx),this.scoreText.render(this.ctx),this.livesText.render(this.ctx),this.collisionDetection(),(this.ball.x+this.ball.dx>this.canvas.width-this.ball.radius||this.ball.x+this.ball.dx<this.ball.radius)&&(this.ball.dx=-this.ball.dx,this.ball.randColor()),this.ball.y+this.ball.dy<this.ball.radius?(this.ball.dy=-this.ball.dy,this.ball.randColor()):this.ball.y+this.ball.dy>this.canvas.height-this.ball.radius&&(this.ball.x>this.paddle.x&&this.ball.x<this.paddle.x+this.paddle.width?(this.ball.dy=-this.ball.dy,this.ball.randColor()):(this.livesText.value-=1,this.livesText.value?this.resetBallAndPaddle():(alert("GAME OVER"),document.location.reload()))),this.movePaddle(),requestAnimationFrame(this.draw.bind(this))}}(a,r)})();